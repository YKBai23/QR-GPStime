<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>AHU Head Office</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                background: #f8f9fa;
                color: #333;
                text-align: center;
                padding-top: 50px;
            }
            h1 { font-size: 3em; margin-bottom: 10px; }
            .info { font-size: 1.5em; margin-top: 20px; }
            .code { font-size: 2.5em; color: green; margin-top: 20px; display:none; }
        </style>
    </head>
    <body>
        <h1>AHU Head Office</h1>
        <div class="info">Your Position: <span id="your-location">Waiting...</span></div>
        <div class="info">QR Position: 32.1651964°, -81.4472032°</div>
        <div class="info">Distance: <span id="distance">...</span> feet</div>
        <div class="info">Authorized? <span id="authorized">Checking...</span></div>
        <div class="code" id="secret-code">BO214</div>

        <script>
        const R = 6371e3;
        const targetLat = 32.1651964;
        const targetLon = -81.4472032;

        function toRad(deg) { return deg * Math.PI / 180; }

        function calculateDistance(lat1, lon1, lat2, lon2) {
            const φ1 = toRad(lat1);
            const φ2 = toRad(lat2);
            const Δφ = toRad(lat2 - lat1);
            const Δλ = toRad(lon2 - lon1);
            const a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +
                      Math.cos(φ1) * Math.cos(φ2) *
                      Math.sin(Δλ/2) * Math.sin(Δλ/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            const d = R * c;
            return d * 3.28084; // meters to feet
        }

        function updatePosition(position) {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            document.getElementById("your-location").textContent = lat.toFixed(6) + ", " + lon.toFixed(6);

            const dist = calculateDistance(lat, lon, targetLat, targetLon);
            document.getElementById("distance").textContent = dist.toFixed(1);
            const authorized = dist <= 200;
            document.getElementById("authorized").textContent = authorized ? "Yes ✅" : "No ❌";
            document.getElementById("secret-code").style.display = authorized ? "block" : "none";
        }

        navigator.geolocation.getCurrentPosition(updatePosition);
        </script>
    </body>
    </html>